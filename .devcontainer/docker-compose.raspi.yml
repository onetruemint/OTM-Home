name: otm-home-raspi
networks:
  otm-home-raspi:
    name: otm-home-raspi
    driver: bridge
services:
  otm-home-portal:
    build:
      context: ..
      dockerfile: apps/portal/Dockerfile
    container_name: otm-home-portal
    ports:
      - "9000:9000"
    networks:
      - otm-home-raspi
    environment:
      # Backend server configuration - set these to your backend server's IP/hostname
      MONGO_URL: ${BACKEND_MONGO_URL:-mongodb://otm-home-user:otm-home-password@BACKEND_SERVER_IP:27017}
      KAFKA_BROKERS: ${BACKEND_KAFKA_BROKERS:-BACKEND_SERVER_IP:9092}
      NODE_ENV: production
      PORT: 9000
    restart: unless-stopped
