name: otm-home-raspi
networks:
  otm-home-raspi:
    name: otm-home-raspi
    driver: bridge
services:
  otm-home-portal:
    env_file:
      - ../.env.raspi
    build:
      context: ../..
      dockerfile: apps/raspi-apps/portal/Dockerfile
      platforms:
        - linux/arm64
    image: ${RASPI_PORTAL_IMAGE:-otm-home-portal:latest}
    container_name: otm-home-portal
    ports:
      - "9000:9000"
    networks:
      - otm-home-raspi
    environment:
      # Backend server configuration - set these to your backend server's IP/hostname
      KAFKA_BROKERS: ${BACKEND_KAFKA_BROKERS:-BACKEND_SERVER_IP:9092}
      NODE_ENV: production
      PORT: 9000
    restart: unless-stopped
